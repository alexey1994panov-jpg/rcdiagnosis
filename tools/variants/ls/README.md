# Варианты ЛС (`tools/variants/ls`)

## Назначение
Папка содержит реализации детекторов ЛС (логическая ложная свободность) для вариантов LS1, LS2, LS4, LS5, LS6, LS9.

## Общие требования реализации
1. Событие открытия ЛС формируется только при достижении терминальной фазы.
2. Закрытие ЛС должно соответствовать `completion_mode` варианта:
- `FREE_TIME` или
- `OCCUPIED_TIME`
3. В проверках должна использоваться runtime-топология (`effective_prev_rc`, `effective_next_rc`, `prev_nc`, `next_nc`).
4. Подавления/исключения применяются после расчета результата детектора.

## Требования по вариантам

### LS1 (`variant_ls1_lz_factory.py`)
1. Обратный паттерн к LZ1.
2. Фазы: `010` в течение `ts01_ls1`, затем `000` в течение `tlz_ls1`.
3. Завершение: `OCCUPIED_TIME`, `tkon_ls1`.
4. Требование к соседям: `BOTH`.

### LS2 (`variant_ls2_lz_factory.py`)
1. Две ветки (`prev`, `next`) с независимыми фазовыми таймерами.
2. Ветка `prev`: `110 -> 100 -> 110`.
3. Ветка `next`: `011 -> 001 -> 011`.
4. Завершение: `FREE_TIME`, `tkon_ls2`.
5. Требование к соседям: `BOTH`.

### LS4 (`variant_ls4_lz_factory.py`)
1. Специализированный оконный детектор (`LS4WindowDetector`).
2. Фаза 1: `111` не менее `ts01_ls4`.
3. Фаза 2: `101` в окне `tlz01_ls4 <= t <= tlz02_ls4`.
4. Фаза 3: `111` в течение `ts02_ls4`, затем открытие.
5. Завершение: `ctrl occupied` в течение `tkon_ls4`.

### LS5 (`variant_ls5_lz_factory.py`)
1. Двухветочный lock-зависимый детектор.
2. Вход в ветку: одна смежная РЦ занята+замкнута, control свободна+замкнута.
3. Открытие только при `обе смежные заняты+замкнуты` и `control свободна+замкнута`.
4. Завершение: `OCCUPIED_TIME`, `tkon_ls5`.
5. Требование к соседям: `BOTH`.

### LS6 (`variant_ls6_lz_factory.py`)
1. NC-ориентированный детектор с двумя ветками (6.1 и 6.2).
2. В phase01 используется требование открытого сигнала.
3. В KOGDA используется `adj occupied + lock`.
4. Завершение: `OCCUPIED_TIME`, `tkon_ls6`.
5. Требование к соседям: `ONE_NC`.

### LS9 (`variant_ls9_lz_factory.py`)
1. Control-centric паттерн: occupied -> free -> occupied.
2. Использует `ts01_ls9`, `tlz_ls9`.
3. Завершение: `FREE_TIME`, `tkon_ls9`.
4. Требование к соседям: `ONLY_CTRL`.
